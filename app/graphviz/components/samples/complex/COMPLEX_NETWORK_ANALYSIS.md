# 複雑なネットワーク構造の分析

## 概要

ケーブリングガイド全体図をベースにした複雑なネットワーク構造をYAMLで表現しました。

## 構造の特徴

### ネットワーク数
- **ServiceNW**: サービスネットワーク
- **HW管理NW**: ハードウェア管理ネットワーク（OOB）

### デバイス数
- **スイッチ**: 10台
  - ServiceNW Super Spine: 2台
  - ServiceNW Spine: 1台
  - ServiceNW Leaf: 3台（通常、GTR接続、Storage）
  - HW管理NW OOB Spine: 2台
  - HW管理NW OOB Leaf: 3台（通常、MGMT、ServiceNW接続）
- **サーバー/ストレージ**: 5台
  - Server: 1台
  - Storage: 1台
  - vSANRN: 1台
  - APIC: 1台
  - ND: 1台
- **外部デバイス**: 6台
  - 別フロア: 5台
  - 別ラック: 1台

**合計**: 21デバイス

### 接続数
- **ServiceNW**: 約20接続
- **HW管理NW**: 約10接続
- **合計**: 約30接続

### ケーブルタイプ
- **光ファイバー（SMF）**: 別フロア接続
  - QSFP-100G-LR4
  - QDD-400G-LR4
  - ET5402-LR
- **光ファイバー（MMF）**: 架内接続
  - SFP-10G-SR
  - SFP28-25G-SR
  - ET5402-SR
  - ET7302-SR
- **光ファイバー（MPO）**: 高速接続
  - QDD-400G-DR4 (MPO-12)
  - QDD-4X100G-FR-S (MPO12 Breakout)
- **銅線**: 架内・架外接続
  - UTP Cable (Cat5e)
  - STP Cable (Cat5e)
  - Breakout DAC QSFP-DD

## YAML構造の検証

### 1. 単一ファイルでの動作確認

各ファイルを個別に読み込んで、以下を確認：
- ✅ YAMLパースが成功するか
- ✅ タイプ判定が正しいか
- ✅ DOTコード生成が成功するか
- ✅ Graphviz表示が正常か

### 2. View切替の動作確認

各Viewタイプで以下を確認：
- ✅ **Topology View**: レイヤー構造が正しく表示されるか
- ✅ **Device View**: デバイスとポートが正しく表示されるか
- ✅ **Connection View**: 接続関係が正しく表示されるか
- ✅ **Full View**: すべてが統合表示されるか

### 3. 複雑な構造での課題

#### 課題1: ノード数が多い場合のパフォーマンス
- **問題**: 21デバイス + 30接続 = 51ノード以上
- **対策**: ノード数制限の警告表示、View切替で表示を制限

#### 課題2: ケーブルタイプ情報の表示
- **問題**: 接続にケーブルタイプ情報が多い
- **対策**: ツールチップまたは別ウィンドウで詳細表示

#### 課題3: 別フロア・別ラックの表現
- **問題**: 視覚的に区別しにくい
- **対策**: 色分け、スタイル変更（実装済み）

#### 課題4: 複数ネットワークの統合表示
- **問題**: ServiceNWとHW管理NWを同時に表示
- **対策**: クラスター（subgraph）で分離表示（実装済み）

## 次のステップ

### Phase 2で実装すべき機能

1. **複数ファイル統合機能**
   - 複数のYAMLファイルを選択して統合
   - 統合されたデータからGraphvizを生成

2. **フィルタリング機能**
   - ネットワーク単位でのフィルタ
   - デバイスタイプでのフィルタ
   - ケーブルタイプでのフィルタ

3. **ズーム・パン機能**
   - 大きなグラフの操作
   - 特定エリアへのフォーカス

4. **詳細情報表示**
   - ノードクリックで詳細情報表示
   - ケーブル情報のポップアップ

5. **エクスポート機能**
   - SVG/PNG形式でのエクスポート
   - 高解像度での出力

## テスト手順

1. **単一ファイルテスト**
   - `topology_network.yaml`を読み込み → Topology View
   - `devices_switches.yaml`を読み込み → Device View
   - `links_service_nw.yaml`を読み込み → Connection View

2. **複数ファイル統合テスト**（Phase 2で実装）
   - すべてのファイルを選択
   - Full Viewで統合表示

3. **パフォーマンステスト**
   - ノード数が多い場合のレンダリング速度
   - メモリ使用量

4. **エラーハンドリングテスト**
   - 不正なYAML形式
   - 欠損データ
   - 参照エラー（存在しないデバイスへの接続）

