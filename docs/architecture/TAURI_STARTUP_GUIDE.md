# Tauriアプリケーション起動ガイド

このアプリケーションはTauriアプリケーションです。ブラウザで直接アクセスするのではなく、Tauriアプリケーションとして起動する必要があります。

## 起動方法

### 方法1: npmコマンドを使用（推奨）

```bash
npm run tauri:dev
```

このコマンドは以下を実行します：
1. Next.js開発サーバーをポート3020で起動
2. Tauriアプリケーションウィンドウを起動
3. アプリケーション内でNext.js開発サーバーに接続

### 方法2: 起動スクリプトを使用（macOS）

```bash
./start-dev.command
```

または、Finderで`start-dev.command`をダブルクリック

### 方法3: シェルスクリプトを使用

```bash
./start-dev.sh
```

## 動作確認

### Tauriアプリケーションウィンドウ

`npm run tauri:dev`を実行すると、Tauriアプリケーションウィンドウが自動的に開きます。

### アクセス可能なページ

Tauriアプリケーション内で以下のページにアクセスできます：

- **メインページ**: アプリ起動時のデフォルトページ
- **組織管理**: `/organization`
- **設定検証**: `/supabase-config-check`
- **動作確認**: `/supabase-test`

### 開発者ツール

Tauriアプリケーションウィンドウで：
- **macOS**: `Cmd + Option + I`
- **Windows/Linux**: `Ctrl + Shift + I`

で開発者ツールを開くことができます。

## 注意事項

### ブラウザで直接アクセスしない

⚠️ **重要**: `http://localhost:3020`にブラウザで直接アクセスしても、Tauriコマンド（`doc_get`, `doc_set`など）は動作しません。

Tauriコマンドは、Tauriアプリケーション内でのみ動作します。

### ポートの確認

- **3020**: Next.js開発サーバー（Tauriアプリケーション内で使用）
- **3011**: Rust APIサーバー（必要に応じて）
- **8000**: ChromaDB Server（必要に応じて）

### エラーが発生した場合

1. **Rustがインストールされていない**
   ```bash
   # Rustのインストール確認
   cargo --version
   ```

2. **ポートが使用中**
   - ポート3020が使用中の場合は、他のプロセスを終了
   - または、`package.json`のポート番号を変更

3. **Tauri CLIがインストールされていない**
   ```bash
   npm install -g @tauri-apps/cli
   ```

## 開発フロー

1. **開発サーバーの起動**
   ```bash
   npm run tauri:dev
   ```

2. **コードの変更**
   - ファイルを保存すると、自動的にホットリロードされます
   - Tauriアプリケーションウィンドウが自動的に更新されます

3. **デバッグ**
   - 開発者ツールでコンソールログを確認
   - Rust側のログはターミナルに表示されます

4. **停止**
   - ターミナルで`Ctrl + C`を押して停止

## トラブルシューティング

### Tauriアプリケーションが起動しない

1. Rustがインストールされているか確認
2. `src-tauri`ディレクトリで`cargo build`が成功するか確認
3. エラーメッセージを確認

### データベースにアクセスできない

1. Tauriアプリケーションとして起動しているか確認
2. ブラウザで直接アクセスしていないか確認
3. データベースファイルが存在するか確認

### リアルタイム同期が動作しない

1. Supabaseモードを使用している場合、環境変数が設定されているか確認
2. Tauriアプリケーション内で動作しているか確認
3. ネットワーク接続を確認

## 参考資料

- [Tauri公式ドキュメント](https://tauri.app/)
- [開発環境セットアップ: DEVELOPMENT_SETUP.md](./DEVELOPMENT_SETUP.md)
- [クイックスタート: QUICK_START.md](./QUICK_START.md)

