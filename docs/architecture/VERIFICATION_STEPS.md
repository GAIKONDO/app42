# 動作確認手順

Tauriアプリケーションが起動したら、以下の順序で確認してください。

## ステップ1: 基本動作確認

### 1.1. アプリケーションウィンドウの確認

- [ ] Tauriアプリケーションウィンドウが正常に表示されている
- [ ] メインページが表示されている
- [ ] エラーメッセージが表示されていない

### 1.2. 開発者ツールの確認

開発者ツールを開いて、エラーがないか確認：

- **macOS**: `Cmd + Option + I`
- **Windows/Linux**: `Ctrl + Shift + I`

- [ ] コンソールにエラーが表示されていない
- [ ] ネットワークタブでリクエストが正常に送信されている

### 1.3. ナビゲーションの確認

- [ ] サイドバーが表示されている
- [ ] 各ページへのナビゲーションが動作する

## ステップ2: 設定検証ページでの確認

### 2.1. 設定検証ページにアクセス

アプリケーション内で以下のページにアクセス：
- `/supabase-config-check`

### 2.2. 設定状態の確認

- [ ] データソースが「ローカルSQLite」と表示されている
- [ ] エラーや警告が表示されていない
- [ ] 「✅ 設定は正常です」と表示されている

## ステップ3: 組織管理機能の確認

### 3.1. 組織管理ページにアクセス

- `/organization`

### 3.2. データの表示確認

- [ ] 組織一覧が表示される
- [ ] 組織ツリーが表示される（データがある場合）
- [ ] エラーメッセージが表示されていない

### 3.3. データ操作の確認（オプション）

- [ ] 組織の詳細を表示できる
- [ ] 組織の作成ができる（テスト用）
- [ ] 組織の更新ができる（テスト用）

## ステップ4: 動作確認ページでの確認（オプション）

### 4.1. 動作確認ページにアクセス

- `/supabase-test`

### 4.2. 基本機能の確認

- [ ] ページが正常に表示される
- [ ] データソース情報が表示される
- [ ] エラーメッセージが表示されていない

## ステップ5: Supabaseモードでの確認（オプション）

Supabaseを使用する場合は、以下を確認：

### 5.1. 環境変数の設定

`.env.local`ファイルに以下を設定：

```env
NEXT_PUBLIC_USE_SUPABASE=true
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### 5.2. Supabaseプロジェクトのセットアップ

1. Supabaseプロジェクトを作成
2. `scripts/supabase/create_schema.sql`を実行
3. `scripts/supabase/enable_realtime.sql`を実行
4. `scripts/supabase/setup_rls.sql`を実行

### 5.3. アプリケーションの再起動

```bash
# アプリケーションを停止（Ctrl+C）
# 再度起動
npm run tauri:dev
```

### 5.4. 設定検証ページでの確認

- `/supabase-config-check`にアクセス
- [ ] データソースが「Supabase」と表示されている
- [ ] 「✅ 接続成功」と表示されている
- [ ] エラーや警告が表示されていない

### 5.5. リアルタイム同期の確認

1. `/supabase-test`にアクセス
2. 複数のTauriアプリケーションウィンドウを開く（同じアプリを複数起動）
3. 一方で組織を追加・更新すると、他方にリアルタイムで反映されることを確認

## トラブルシューティング

### エラーが表示される場合

1. **開発者ツールでエラーを確認**
   - コンソールタブでエラーメッセージを確認
   - ネットワークタブでリクエストの失敗を確認

2. **ログを確認**
   - ターミナルに表示されるRust側のログを確認
   - エラーメッセージを記録

3. **データベースの確認**
   - データベースファイルが存在するか確認
   - データベースが破損していないか確認

### データが表示されない場合

1. **データベースにデータが存在するか確認**
2. **Tauriコマンドが正常に動作しているか確認**
3. **ネットワーク接続を確認**（Supabase使用時）

## 次のステップ

すべての確認が完了したら：

1. **既存機能の統合**
   - `useOrganizationDataWithRealtime`を使用してリアルタイム同期を有効化
   - 詳細は[統合ガイド: INTEGRATION_GUIDE.md](./INTEGRATION_GUIDE.md)を参照

2. **Supabaseモードでの動作確認**
   - Supabaseプロジェクトをセットアップ
   - リアルタイム同期と共同編集機能を確認

3. **本番環境への移行準備**
   - データ移行スクリプトの準備
   - パフォーマンステスト

